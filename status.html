---
layout: default
title: status
---
<div class="ui-widget">

<p>GloBI integrates with many existing external data sources. As data sources are independently managed, GloBI continually discovers and revisits data sources to include recent updates or changes. This page gives you some insight into which data sources are used, where they are located, and what their status is. If you are interested to learn about dataset/source management, please go <a href="http://github.com/jhpoelen/eol-globi-data/wiki/Dataset-Management" target="_blank">here</a>.</p>

<p><b>Note: this page is under development. Please <a href="https://github.com/jhpoelen/eol-globi-data" target="_blank">submit an issue</a> for suggestions or bugs.</b></p>


<div id="status">loading...</div>
<table id="sources">
  <tr>
<th><a href="https://github.com/jhpoelen/eol-globi-data/wiki/Dataset-Management#readability" title="What make a source readable?">readable</a></th>
<th><a href="https://github.com/jhpoelen/eol-globi-data/wiki/Dataset-Management#issues" title="How many known issue does this source have?">issues</a></th>
<th><a href="https://github.com/jhpoelen/eol-globi-data/wiki/Dataset-Management#searchability" title="What makes a source searchable?">searchable</a></th>
<th><a href="https://github.com/jhpoelen/eol-globi-data/wiki/Dataset-Management#citability" title="What makes a source citable?">citable</a></th>
<th></th></tr> 
</table>

</div>


<script src="js/globi-web-min.js"></script>
<script>

  var appendLink = function(tr) {
    var td = tr.appendChild(document.createElement('td'));
    var a = td.appendChild(document.createElement('a'));
    return a;
  }

  var keyFromSource = function(source) {
    if (source.doi !== undefined) {
      return source.doi;
    } else if (source.key !== undefined) {
      return source.key;
    } else {
      return source.name;
    }
  }
 
  var appendSourceTo = function(source, elem) {
    var tr = elem.appendChild(document.createElement('tr'));
    tr.setAttribute('class', 'interaction');
    
    var a = appendLink(tr);
    var travisUrl = 'https://travis-ci.org/' + source.name;
    a.setAttribute('href', travisUrl);
    a.setAttribute('target', '_blank');
    var img = a.appendChild(document.createElement('img'));
    img.setAttribute('src', travisUrl + '.svg');

    var a = appendLink(tr);
    var issuesUrl = 'https://github.com/' + source.name + '/issues/';
    a.setAttribute('href', issuesUrl);
    a.setAttribute('target', '_blank');
    var img = a.appendChild(document.createElement('img'));
    img.setAttribute('src', 'https://img.shields.io/github/issues/' + source.name + '.svg');

    var a = appendLink(tr);
    var accordingTo = keyFromSource(source);
    a.setAttribute('href', 'http://globalbioticinteractions.org/?accordingTo=' + accordingTo);
    a.setAttribute('target', '_blank');
    var img = a.appendChild(document.createElement('img'));
    img.setAttribute('src', 'http://api.globalbioticinteractions.org/interaction.svg?accordingTo=' + accordingTo);
    
    var a = appendLink(tr);
   
    if (source.doi === undefined) {
      a.setAttribute('href', 'https://github.com/jhpoelen/eol-globi-data/wiki/Dataset-Management#citability');
      a.setAttribute('target', '_blank');
      var img = a.appendChild(document.createElement('img'));
      img.setAttribute('src', 'assets/doiUnknown.svg');
    } else {      
      a.setAttribute('href', 'https://doi.org/' + source.doi);
      a.setAttribute('target', '_blank');
      var img = a.appendChild(document.createElement('img'));
      img.setAttribute('src', 'assets/doi.svg');
    }

    var urlForSource = function(source) {
      if (source.url === undefined) {
        return 'https://github.com/' + source.name;
      } else {
        return source.url;
      }
    };

    var appendImgForSource = function(source, elem) {
      if (source.url === undefined) {
        var sizePx = 18;
        var gitHubName = source.name.split('/')[0];
        var urlBase = 'https://github.com/' + gitHubName;
        var url = urlBase + '.png?size=' + sizePx;
        var a = document.createElement('a');
        a.setAttribute('href', urlBase);
        a.setAttribute('target', '_blank');
        a.setAttribute('title', 'github profile for ' + gitHubName);
        var img = a.appendChild(document.createElement('img'));
        img.setAttribute('src', url);
        img.setAttribute('style', 'width:' + sizePx + 'px; padding-left:' + sizePx/2 + 'px');
        elem.parentNode.appendChild(a);
      } 
    }

    var nameForSource = function(source) {
      return source.name;
    };

    var a = appendLink(tr);
    appendImgForSource(source, a);
    a.setAttribute('href', urlForSource(source));
    a.setAttribute('target', '_blank');
    a.textContent = nameForSource(source);
  }

  var globiData = globiWeb.globi.globiData;
  globiData.findSourceNames(function(sourceNames) {
    var frag = document.createDocumentFragment();
    
    var nameCompare = function(a, b) {
      var x = a.name.toUpperCase();
      var y = b.name.toUpperCase();
      if (x < y) {
        return -1;
      } else if (x > y) {
        return 1;
      } else {
        return 0;
      }
    }; 

 
    sourceNames.sort(nameCompare).forEach(function(sourceName) { appendSourceTo(sourceName, frag); });
    var sources = document.getElementById('sources');
    sources.appendChild(frag);
    var status = document.getElementById('status');
    status.parentNode.removeChild(status);
  });
  
</script>
